var TDV="object"==typeof TDV?TDV:{};TDV.Quiz=function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=14)}([function(t,e){var i={inheritPrototype:function(t,e){function i(){}i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t},applyMixins:function(t,e){e.forEach((function(e){Object.getOwnPropertyNames(e.prototype).forEach((function(i){t.prototype[i]=e.prototype[i]}))}))},extend:function(){var t=arguments[0],e=arguments[arguments.length-1],n=Array.prototype.slice.call(arguments,1,arguments.length-1);return i.inheritPrototype(e,t),i.applyMixins(e,n),e}};t.exports=i},function(t,e,i){"use strict";var n,o="object"==typeof Reflect?Reflect:null,s=o&&"function"==typeof o.apply?o.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};n=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var r=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function l(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function h(t,e,i,n){var o,s,r,a;if(l(i),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),s=t._events),r=s[e]),void 0===r)r=s[e]=i,++t._eventsCount;else if("function"==typeof r?r=s[e]=n?[i,r]:[r,i]:n?r.unshift(i):r.push(i),(o=u(t))>0&&r.length>o&&!r.warned){r.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=r.length,a=c,console&&console.warn&&console.warn(a)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(t,e,i){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},o=d.bind(n);return o.listener=i,n.wrapFn=o,o}function f(t,e,i){var n=t._events;if(void 0===n)return[];var o=n[e];return void 0===o?[]:"function"==typeof o?i?[o.listener||o]:[o]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(o):m(o,o.length)}function p(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function m(t,e){for(var i=new Array(e),n=0;n<e;++n)i[n]=t[n];return i}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");c=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var n="error"===t,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var r;if(e.length>0&&(r=e[0]),r instanceof Error)throw r;var a=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw a.context=r,a}var c=o[t];if(void 0===c)return!1;if("function"==typeof c)s(c,this,e);else{var l=c.length,u=m(c,l);for(i=0;i<l;++i)s(u[i],this,e)}return!0},a.prototype.addListener=function(t,e){return h(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return h(this,t,e,!0)},a.prototype.once=function(t,e){return l(e),this.on(t,_(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,_(this,t,e)),this},a.prototype.removeListener=function(t,e){var i,n,o,s,r;if(l(e),void 0===(n=this._events))return this;if(void 0===(i=n[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(o=-1,s=i.length-1;s>=0;s--)if(i[s]===e||i[s].listener===e){r=i[s].listener,o=s;break}if(o<0)return this;0===o?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,o),1===i.length&&(n[t]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",t,r||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var o,s=Object.keys(i);for(n=0;n<s.length;++n)"removeListener"!==(o=s[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},a.prototype.listeners=function(t){return f(this,t,!0)},a.prototype.rawListeners=function(t){return f(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},a.prototype.listenerCount=p,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(t,e,i){"use strict";var n=i(12);function o(){}var s=null,r={};function a(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("Promise constructor's argument is not a function");this._h=0,this._i=0,this._j=null,this._k=null,t!==o&&_(t,this)}function c(t,e){for(;3===t._i;)t=t._j;if(a._l&&a._l(t),0===t._i)return 0===t._h?(t._h=1,void(t._k=e)):1===t._h?(t._h=2,void(t._k=[t._k,e])):void t._k.push(e);!function(t,e){n((function(){var i=1===t._i?e.onFulfilled:e.onRejected;if(null!==i){var n=function(t,e){try{return t(e)}catch(t){return s=t,r}}(i,t._j);n===r?u(e.promise,s):l(e.promise,n)}else 1===t._i?l(e.promise,t._j):u(e.promise,t._j)}))}(t,e)}function l(t,e){if(e===t)return u(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var i=function(t){try{return t.then}catch(t){return s=t,r}}(e);if(i===r)return u(t,s);if(i===t.then&&e instanceof a)return t._i=3,t._j=e,void h(t);if("function"==typeof i)return void _(i.bind(e),t)}t._i=1,t._j=e,h(t)}function u(t,e){t._i=2,t._j=e,a._m&&a._m(t,e),h(t)}function h(t){if(1===t._h&&(c(t,t._k),t._k=null),2===t._h){for(var e=0;e<t._k.length;e++)c(t,t._k[e]);t._k=null}}function d(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}function _(t,e){var i=!1,n=function(t,e,i){try{t(e,i)}catch(t){return s=t,r}}(t,(function(t){i||(i=!0,l(e,t))}),(function(t){i||(i=!0,u(e,t))}));i||n!==r||(i=!0,u(e,s))}t.exports=a,a._l=null,a._m=null,a._n=o,a.prototype.then=function(t,e){if(this.constructor!==a)return function(t,e,i){return new t.constructor((function(n,s){var r=new a(o);r.then(n,s),c(t,new d(e,i,r))}))}(this,t,e);var i=new a(o);return c(this,new d(t,e,i)),i}},function(t,e,i){var n=i(5),o={showWindow:function(t,e,i,s){return new n((function(n,r){o.bindOnce(e,"showEnd",(function(){o._displayVeil(i).then((function(){return o._displayWindow(s)})).then((function(){n()}))})),o.bringToFront(t,e),i.set("visible",!1),s.set("visible",!1),e.set("visible",!0)}))},hideWindow:function(t,e,i,s){return new n((function(t,n){o.bindOnce(s,"hideEnd",(function(){function n(){e.set("visible",!1),t()}i.get("visible")?(o.bindOnce(i,"hideEnd",n),i.set("visible",!1)):n()})),s.set("visible",!1)}))},append:function(t,e){var i=t.get("children")||[];return i.indexOf(e)<0&&t.set("children",i.concat([e])),e},remove:function(t,e){var i=t.get("children");return i&&i.indexOf(e)>=0&&(i.slice(),i.splice(i.indexOf(e),1),t.set("children",i)),e},bringToFront:function(t,e){var i=t.get("children")||[];return i.indexOf(e)<i.length-1&&t.set("children",i.filter((function(t){return t!=e})).concat([e])),e},bindOnce:function(t,e,i,n,o){var s=function(r){t.unbind(e,s,n,o),i.call(this,r)};t.bind(e,s,n,o)},applyStyle:function(t,e){var i=s[t.getClassName()]||{};for(var n in e){var o=e[n];a(o)||t.set(i[n]||n,o)}}},s={Label:{textAlign:"horizontalAlign"}};function r(t,e){for(var i in e){var n=e[i];a(n)?r(t[i]||(t[i]={}),e[i]):t[i]=n}return t}function a(t){return t&&"object"==typeof t}o.setHTMLText=function(t,e){if(t.get("width")){this.bindOnce(t,"show",(function(){setTimeout((function(){t.set("content",o.textToHTML(e)),t.set("width",i)}),20)}),this,!0);var i=t.get("width");t.set("content",""),t.set("width",void 0),t.get("visible")&&(t.set("visible",!1),setTimeout((function(){t.set("visible",!0)}),20))}else t.set("content",o.textToHTML(e))},o.textToHTML=function(t){return t?t.split("\n").map((function(t){return"<div>"+t+"</div>"})).join(""):""},o.secondsToStr=function(t,e){if(isNaN(t))return"";t=Math.round(t);var i="",n=Math.floor(t/3600);(n||e&&e>=3600)&&(i+=n+":"),t%=3600;var o=Math.floor(t/60);return o<10&&(i+="0"),i+=o+":",(t%=60)<10&&(i+="0"),i+=t},o._displayVeil=function(t){return t.get("backgroundOpacity")&&t.get("backgroundColor")?new n((function(e,i){o.bindOnce(t,"showEnd",(function(){e()})),t.set("visible",!0)})):n.resolve()},o._displayWindow=function(t){return new n((function(e,i){var n=t.get("shadow");t.set("shadow",!1),o.bindOnce(t,"showEnd",(function(){t.set("shadow",n),e()})),t.set("visible",!0)}))},o.getThemeValue=function(t,e,i){for(var n=t,o=e.split(".");;){if(!o.length)return void 0===n?i:n;if(!a(n))return i;n=n[o.shift()]}},o.get=function(t,e,i){for(var n=t,o=e.split(".");;){if(!o.length)return void 0===n?i:n;if(!n||"object"!=typeof n)return i;n=n[o.shift()]}},o.mixObjects=function(){for(var t={},e=0;e<arguments.length;e++)t=r(t,arguments[e]);return t},t.exports=o},function(t,e,i){var n=i(3),o=function(t,e){this._player=t,this._styleInstances={},this._ids=[],this._parent=null,this._root=this._create(e)};function s(t){return t&&"object"==typeof t}Object.defineProperty(o.prototype,"root",{get:function(){return this._root}}),Object.defineProperty(o.prototype,"ids",{get:function(){return this._ids}}),o.prototype._create=function(t){if(Array.isArray(t))return t.map(this._create.bind(this));var e=this._player.createInstance(t.class||"UIComponent");for(var i in t.style&&(this._styleInstances[t.style]||(this._styleInstances[t.style]=[])).push(e),t.id&&(this[t.id]=e,this._ids.push(t.id)),t)if(!(["id","class","style"].indexOf(i)>-1)){var n=t[i];(Array.isArray(n)||"object"==typeof n&&null!==n)&&(n=this._create(n)),e.set(i,n)}return e},o.prototype.setParent=function(t){this._parent&&n.remove(this._parent,this._root),this._parent=t,this._parent&&n.append(this._parent,this._root)},o.prototype.applyStyle=function(t){for(var e in this._styleInstances){for(var i=e.split("."),o=t;i.length&&s(o);)o=o[i.shift()];s(o)&&this._styleInstances[e].forEach((function(t){n.applyStyle(t,o)}))}},t.exports=o},function(t,e,i){"use strict";t.exports=i(20)},function(t,e,i){var n=i(1),o=i(7),s=i(0),r=s.extend(n,(function(t){n.call(this),this._data=function t(e,i){for(var n in i)void 0===e[n]?e[n]=i[n]:e[n]&&"object"==typeof e[n]&&"object"==typeof i[n]&&t(e[n],i[n]);return e}(t,{califications:[],objectives:[],question:{ok:"OK",scoreZeroIsIncorrect:!1,responseDisplayTime:2e3},score:{canClose:!1,description:null,elapsedTime:{label:"Time",visible:!1},completion:{label:"Completed",visible:!0},items:{label:"Items Found",visible:!0},questions:{label:"Questions",correctLabel:"Correct",incorrectLabel:"Incorrect",visible:!0},submitToLMS:{label:"Submit",visible:!1},downloadCSV:{label:"Download .csv",visible:!1},repeat:{label:"Repeat",visible:!1},title:"- SCORE -"},timeout:{score:{label:"View score",visible:!0},repeat:{label:"Repeat",visible:!1},title:"- TIMEOUT -"}}),this._items=(this._data.items||[]).map(function(t){return new a(this,t)}.bind(this)),this._questions=(this._data.questions||[]).map(function(t){return new c(this,t)}.bind(this)),!this._data.mainObjective&&this._data.objectives.length>0&&(this._data.mainObjective=this._data.objectives[0].id),[].concat(this._items,this._questions).forEach(function(t){t.on(r.EVENT_CHANGE,function(){this.emit(r.EVENT_CHANGE)}.bind(this))}.bind(this)),this._timer=new o(this.get("timeLimit"))}));r.prototype.get=function(t,e){for(var i=this._data,n=t.split(".");;){if(!n.length)return void 0===i?e:i;if(!i||"object"!=typeof i)return e;i=i[n.shift()]}},Object.defineProperty(r.prototype,"timer",{get:function(){return this._timer}}),Object.defineProperty(r.prototype,"items",{get:function(){return this._items}}),Object.defineProperty(r.prototype,"questions",{get:function(){return this._questions}}),r.prototype.getCalification=function(t){var e=this.get("califications").slice();e.sort((function(t,e){return(void 0!==t.minScore?t.minScore:Number.NEGATIVE_INFINITY)-(void 0!==e.minScore?e.minScore:Number.NEGATIVE_INFINITY)}));for(var i=null,n=0;n<e.length&&!(e[n].minScore>t);n++)i=e[n];return i&&i.text},r.prototype.getItem=function(t){for(var e=0;e<this._items.length;e++)if(this._items[e].id==t)return this._items[e];return null},r.prototype.getPanoramaItems=function(t){return this._items.filter((function(e){return e.panorama==t}))},r.prototype.getQuestion=function(t){for(var e=0;e<this._questions.length;e++)if(this._questions[e].id==t)return this._questions[e];return null},r.prototype.getPanoramaQuestions=function(t){return this._questions.filter((function(e){return e.panorama==t}))},r.EVENT_CHANGE="change";var a=s.extend(n,(function(t,e){n.call(this),this._model=t,this._data=e,this.id=e.id,this.objective=e.objective||t.get("mainObjective"),this.panorama=e.panorama,this.maxScore=Math.max(0,e.score),this.minScore=Math.min(0,e.score),this.score=0,this.answer=this.found=!1}));a.prototype.setFound=function(){this.answer=this.found=!0,this.score=this._data.score,this.emit(r.EVENT_CHANGE)};var c=s.extend(n,(function(t,e){n.call(this),this._model=t,this._data=e,this.id=e.id,this.objective=e.objective||t.get("mainObjective"),this.panorama=e.panorama,this.media=e.media,this.multipleChoice=e.multipleChoice,this.canRepeat=e.canRepeat||!1,this.canClose=void 0===e.canClose||e.canClose,e.multipleChoice?(this.maxScore=e.options.reduce((function(t,e){return Math.max(e.score,0)+t}),0),this.minScore=e.options.reduce((function(t,e){return Math.min(e.score,0)+t}),0)):(this.maxScore=e.options.reduce((function(t,e){return Math.max(e.score,t)}),0),this.minScore=e.options.reduce((function(t,e){return Math.min(e.score,t)}),0)),this.options=e.options,this.answer=void 0,this.score=0}));Object.defineProperty(c.prototype,"title",{get:function(){return this._data.title}}),c.prototype.setAnswer=function(t){this.answer=t,this.answered=!0,this.score=t.reduce((function(t,e){return e.score+t}),0),this.correct=this.score>0,this.incorrect=this.score<0||0===this.score&&this._model.get("question.scoreZeroIsIncorrect"),this.emit(r.EVENT_CHANGE)},t.exports=r},function(t,e,i){var n=i(1),o=i(0).extend(n,(function(t){n.call(this),this._timeLimit=t,this._intervalId=null,this._startTime=void 0,this._endTime=void 0,this._pauseTime=void 0,this._tickInterval=1e3,this._tickIndex=void 0}));function s(){return(new Date).getTime()}o.prototype.start=function(){this._intervalId||(this._pauseTime?this._startTime=s()-(this._pauseTime-this._startTime):this._startTime=s(),this._pauseTime=void 0,this._timeLimit?this._endTime=this._startTime+1e3*this._timeLimit:this._endTime=void 0,this._intervalId=setInterval(this._tick.bind(this),.1*this._tickInterval),this._tick())},o.prototype.pause=function(){this._intervalId&&(this._pauseTime=s(),clearInterval(this._intervalId),this._intervalId=null)},o.prototype.isRunning=function(){return this._intervalId},o.prototype.continue=function(){this.start()},Object.defineProperty(o.prototype,"enabled",{get:function(){return!!this._timeLimit}}),Object.defineProperty(o.prototype,"elapsed",{get:function(){if(void 0===this._startTime)return 0;var t=this._pauseTime||s();return Math.round((t-this._startTime)/1e3)}}),Object.defineProperty(o.prototype,"remaining",{get:function(){if(this._endTime){var t=this._pauseTime||s();return Math.max(Math.round((this._endTime-t)/1e3),0)}}}),o.prototype._tick=function(){var t=s();if(this._endTime&&t>this._endTime)clearInterval(this._intervalId),this._intervalId=null,this.emit(o.EVENT_TICK),this.emit(o.EVENT_TIMEOUT);else{var e=Math.round((t-this._startTime)/this._tickInterval);this._tickIndex!==e&&(this._tickIndex=e,this.emit(o.EVENT_TICK))}},o.EVENT_TIMEOUT="timeout",o.EVENT_TICK="tick",t.exports=o},function(t,e,i){var n=i(1),o=i(0).extend(n,(function(){n.call(this),this._properties={}}));o.prototype.get=function(t,e){var i=this._properties[t];return void 0===i&&(i=e),i},o.prototype.set=function(){var t;2==arguments.length?(t={})[arguments[0]]=arguments[1]:t=arguments[0];var e={},i=!1;for(var n in t)this._properties[n]!==t[n]&&(e[n]=this._properties[n]=t[n],i=!0);if(i){for(var n in e)this.emit(o.EVENT_PROPERTY_CHANGE,n,e[n]);this.emit(o.EVENT_PROPERTIES_CHANGE,e)}},o.EVENT_PROPERTY_CHANGE="propertyChange",o.EVENT_PROPERTIES_CHANGE="propertiesChange",t.exports=o},function(t,e,i){var n=i(1),o=i(0),s=i(6),r=o.extend(n,(function(t,e,i){n.call(this),this._model=t,this._initialScore=i,this.objective=e,this._filter=function(t){return t.objective==e},this._update=this._update.bind(this),this._model.on(s.EVENT_CHANGE,this._update),this._model.get("playList").bind("items_change",this._update,this,!0),this._model.get("playList").bind("selectedIndex_change",this._update,this,!0),this._update()}));r.prototype._update=function(){var t=this._model.get("playList").get("selectedIndex"),e=t>=0?this._model.get("playList").get("items")[t].get("media"):null,i=this._model.getPanoramaItems(e).filter(this._filter),n=this._model.getPanoramaQuestions(e).filter(this._filter),o=this._model.items.filter(this._filter),s=this._model.questions.filter(this._filter);this.panoramaItemCount=i.length,this.panoramaItemsFound=i.filter((function(t){return t.found})).length,this.panoramaQuestionCount=n.length,this.panoramaQuestionsAnswered=n.filter((function(t){return t.answered})).length,this.panoramaScore=[].concat(i,n).reduce((function(t,e){return t+e.score}),0),this.panoramaTotalScore=[].concat(i,n).reduce((function(t,e){return t+e.maxScore}),0),this.itemsFound=o.filter((function(t){return t.found})).length,this.itemCount=o.length,this.score=[].concat(o,s).reduce((function(t,e){return t+e.score}),this._initialScore),this.totalScore=[].concat(o,s).reduce((function(t,e){return t+e.maxScore}),this._initialScore),this.questionCount=s.length,this.questionsAnswered=s.filter((function(t){return t.answered})).length,this.correctAnswerCount=s.filter((function(t){return t.correct})).length,this.incorrectAnswerCount=s.filter((function(t){return t.incorrect})).length,this.emit(r.EVENT_CHANGE)},r.EVENT_CHANGE="change",t.exports=r},function(t,e){var i={panoramas:[],download:function(t){this._panoramas=[];var e=[];t.items.length&&(e=e.concat([this._itemHeaderRow()],t.items.map(function(e){return this._itemRow(t,e)}.bind(this)))),t.questions.length&&(e=e.concat([this._questionHeaderRow()],t.questions.map(function(e){return this._questionRow(t,e)}.bind(this)))),e=e.concat(i._scoreRows(t));var n=this._encodeRows(e);this._download(n)},_itemHeaderRow:function(){return["Panorama","Id","Objective","Item Score","Found","Learner Score"]},_itemRow:function(t,e){return[this._panoramaId(e.panorama),e.id,this._objectiveLabel(t,e.objective),e.maxScore,e.found?"yes":"no",e.score]},_questionHeaderRow:function(){return["Panorama","Id","Objective","Question","Question Max Score","Question Min Score","Correct Answers","Learner Answers","Learner Score"]},_questionRow:function(t,e){var i=[],n=[];return e.options.forEach((function(t,o){var s=String.fromCharCode("a".charCodeAt(0)+o);t.score>0&&i.push(s),e.answered&&e.answer.indexOf(t)>=0&&n.push(s)})),[this._panoramaId(e.panorama),e.id,this._objectiveLabel(t,e.objective),e.title,e.maxScore,e.minScore,i.join(","),n.join(","),e.score]},_panoramaId:function(t){if(!t)return"";var e=this._panoramas.indexOf(t);return e<0&&(e=this._panoramas.length,this._panoramas.push(t)),t.get("label")||"panorama"+(e+1)},_objectiveLabel:function(t,e){for(var i=t.get("objectives",[]),n=0;n<i.length;n++)if(i[n].id==e)return i[n].label;return""},_scoreRows:function(t){var e=[].concat(t.items,t.questions),i=[];return i.push(["Objective","Total Score","Total Max Score","Total Min Score","Scaled Score (0-100)","Session Time (s)"]),t.get("objectives").forEach((function(n){var o=0,s=0,r=0;e.filter((function(t){return t.objective==n.id})).forEach((function(t){o+=t.minScore,s+=t.maxScore,r+=t.score})),i.push([n.label,r,s,o,((r-o)/(s-o)).toFixed(1),Math.round(t.timer.elapsed)])})),i},_encodeRows:function(t){return t.map((function(t){return t.map((function(t){return"string"==typeof t?'"'+t.split('"').join('""')+'"':"number"==typeof t?'"'+t.toString()+'"':'""'})).join(",")})).join("\n")},_download:function(t){var e=document.createElement("a");e.href="data:text/csv;charset=utf-8,"+encodeURI(t),e.target="_blank",e.download="quiz.csv",e.click()}};t.exports=i},function(t,e,i){var n=i(17),o={submit:function(t){s.submit(t)}},s=[i(18),n].reduce((function(t,e){return!t&&e.available()?e:t}),null);o.available=!!s,t.exports=o},function(t,e,i){"use strict";(function(e){function i(t){o.length||(n(),!0),o[o.length]=t}t.exports=i;var n,o=[],s=0;function r(){for(;s<o.length;){var t=s;if(s+=1,o[t].call(),s>1024){for(var e=0,i=o.length-s;e<i;e++)o[e]=o[e+s];o.length-=s,s=0}}o.length=0,s=0,!1}var a,c,l,u=void 0!==e?e:self,h=u.MutationObserver||u.WebKitMutationObserver;function d(t){return function(){var e=setTimeout(n,0),i=setInterval(n,50);function n(){clearTimeout(e),clearInterval(i),t()}}}"function"==typeof h?(a=1,c=new h(r),l=document.createTextNode(""),c.observe(l,{characterData:!0}),n=function(){a=-a,l.data=a}):n=d(r),i.requestFlush=n,i.makeRequestCallFromTimer=d}).call(this,i(21))},function(t,e,i){var n=i(4),o=function(t,e){this._player=t,this._layoutDefinition=e,this._parent=null,this._layouts=[],this._source=[],this._ids=[],this._style=null};o.prototype.setSource=function(t){this._parent&&this._removeFromParent(this._parent),this._ids.forEach(function(t){delete this[t]}.bind(this)),this._source=t||[],this._source.length?(this._layouts=this._source.map(function(t){return new n(this._player,this._layoutDefinition)}.bind(this)),this._style&&this.applyStyle(this._style),this._ids=this._layouts[0].ids,this._ids.forEach(function(t){this[t]=this._layouts.map((function(e){return e[t]}))}.bind(this))):(this._layouts=[],this._ids=[]),this._parent&&this._addToParent(this._parent)},o.prototype.setParent=function(t){this._parent&&this._removeFromParent(this._parent),this._parent=t,this._parent&&this._addToParent(this._parent)},o.prototype.applyStyle=function(t){this._style=t,this._layouts.forEach((function(e){e.applyStyle(t)}))},o.prototype._removeFromParent=function(t){var e=this._layouts.map((function(t){return t.root}));t.set("children",this._parent.get("children").filter((function(t){return e.indexOf(t)<0})))},o.prototype._addToParent=function(t){var e=this._layouts.map((function(t){return t.root}));t.set("children",(this._parent.get("children")||[]).concat(e))},t.exports=o},function(t,e,i){var n=i(0),o=i(6),s=i(8),r=i(15),a=i(9),c=i(16),l=i(7),u=(i(10),i(11)),h=i(19),d=i(30),_=i(33),f=i(3),p=n.extend(s,(function(t){s.call(this),this._running=!1,this._model=new o(t),this._model.get("timeLimit")&&this.set(p.PROPERTY.TIME_LIMIT,f.secondsToStr(this._model.get("timeLimit"))),this._model.timer.on(l.EVENT_TIMEOUT,this._onTimeout.bind(this)),this._model.timer.on(l.EVENT_TICK,this._onTimerTick.bind(this)),this._onTimerTick(),this._stats=new c(this._model),this._stats.on(c.EVENT_CHANGE,this._onStatsChange.bind(this)),this._onStatsChange(),this._panoramaVisited=[],this._objectiveScoreboards=new r(this._model),this._objectiveProperties={},this._model.get("objectives").forEach(function(t){var e=new s;e.on(s.EVENT_PROPERTY_CHANGE,function(e,i){this.emit(p.EVENT_OBJECTIVE_PROPERTY_CHANGE,t.id,e,i)}.bind(this)),e.on(s.EVENT_PROPERTIES_CHANGE,function(e){this.emit(p.EVENT_OBJECTIVE_PROPERTIES_CHANGE,t.id,e)}.bind(this)),this._objectiveProperties[t.id]=e;var i=this._objectiveScoreboards.get(t.id);i.on(a.EVENT_CHANGE,function(){this._onScoreboardChange(i)}.bind(this)),this._onScoreboardChange(i)}.bind(this)),this._question=new h(this._model),this._previousQuestionPromise=Promise.resolve(),this._score=new d(this._model,this._objectiveScoreboards,this._stats),this._timeout=new _(this._model),this._timeout.on(_.EVENT_SHOW_SCORE_CLICK,function(t){this._score.show(t)}.bind(this))}));p.prototype.start=function(){this._running||(this._running=!0,this._model.timer.start(),this.emit(p.EVENT_START))},p.prototype.finish=function(){this._running&&(this._running=!1,this._model.timer.pause(),this.emit(p.EVENT_FINISH))},p.prototype.pauseTimer=function(){this._running&&this._model.timer.pause()},p.prototype.continueTimer=function(){this._running&&this._model.timer.continue()},p.prototype.setItemFound=function(t){this._running&&this._model.getItem(t).setFound()},p.prototype.showQuestion=function(t,e){if(!this._running)return Promise.reject("Quiz isn't running");var i=this._previousQuestionPromise;return this._previousQuestionPromise=new Promise(function(n,o){var s=function(){this._question.show(t,e).then(n,o)}.bind(this);i.then(s).catch(s)}.bind(this))},p.prototype.showScore=function(t){return this._score.show(t)},p.prototype.showTimeout=function(t,e){this._timeout.show(t,e)},p.prototype.submitToLMS=function(){return!!u.available&&(u.submit(this._model),!0)},p.prototype.bind=function(t,e){this.on(t,e)},p.prototype.unbind=function(t,e){this.off(t,e)},p.prototype.get=function(t,e){return s.prototype.get.apply(this,arguments)},p.prototype.getObjective=function(t,e,i){return this._objectiveProperties[t].get(e,i)},p.PROPERTY={PANORAMA_ITEMS_FOUND:"panoramaItemsFound",PANORAMA_ITEM_COUNT:"panoramaItemCount",ITEMS_FOUND:"itemsFound",ITEM_COUNT:"itemCount",PANORAMA_QUESTIONS_ANSWERED:"panoramaQuestionsAnswered",PANORAMA_QUESTION_COUNT:"panoramaQuestionCount",QUESTIONS_ANSWERED:"quesitonsAnswered",QUESTION_COUNT:"questionCount",PANORAMA_SCORE:"panoramaScore",PANORAMA_TOTAL_SCORE:"panoramaTotalScore",SCORE:"score",TOTAL_SCORE:"totalScore",REMAINING_TIME:"remainingTime",ELAPSED_TIME:"elapsedTime",TIME_LIMIT:"timeLimit",PANORAMA_VISITED_COUNT:"panoramaVisitedCount",PANORAMA_INDEX:"panoramaIndex",PANORAMA_COUNT:"panoramaCount"},p.OBJECTIVE_PROPERTY={PANORAMA_ITEMS_FOUND:"panoramaItemsFound",PANORAMA_ITEM_COUNT:"panoramaItemCount",ITEMS_FOUND:"itemsFound",ITEM_COUNT:"itemCount",PANORAMA_QUESTIONS_ANSWERED:"panoramaQuestionsAnswered",PANORAMA_QUESTION_COUNT:"panoramaQuestionCount",QUESTIONS_ANSWERED:"quesitonsAnswered",QUESTION_COUNT:"questionCount",PANORAMA_SCORE:"panoramaScore",PANORAMA_TOTAL_SCORE:"panoramaTotalScore",SCORE:"score",TOTAL_SCORE:"totalScore"},p.EVENT_PROPERTY_CHANGE=s.EVENT_PROPERTY_CHANGE,p.EVENT_PROPERTIES_CHANGE=s.EVENT_PROPERTIES_CHANGE,p.EVENT_OBJECTIVE_PROPERTY_CHANGE="objectivePropertyChange",p.EVENT_OBJECTIVE_PROPERTIES_CHANGE="objectivePropertiesChange",p.EVENT_TIMEOUT="timeout",p.EVENT_START="start",p.EVENT_FINISH="finish",p.prototype._onTimerTick=function(){this.set(p.PROPERTY.REMAINING_TIME,f.secondsToStr(this._model.timer.remaining)),this.set(p.PROPERTY.ELAPSED_TIME,f.secondsToStr(this._model.timer.elapsed,this._model.get("timeLimit")))},p.prototype._onTimeout=function(){this.emit(p.EVENT_TIMEOUT)},p.prototype._onStatsChange=function(){this.set(p.PROPERTY.PANORAMA_VISITED_COUNT,this._stats.panoramaVisitedCount),this.set(p.PROPERTY.PANORAMA_INDEX,this._stats.panoramaIndex),this.set(p.PROPERTY.PANORAMA_COUNT,this._stats.panoramaCount)},p.prototype._onScoreboardChange=function(t){var e=[this._objectiveProperties[t.objective]];t.objective==this._model.get("mainObjective")&&e.push(this),e.forEach((function(e){e.set(p.OBJECTIVE_PROPERTY.PANORAMA_ITEMS_FOUND,t.panoramaItemsFound),e.set(p.OBJECTIVE_PROPERTY.PANORAMA_ITEM_COUNT,t.panoramaItemCount),e.set(p.OBJECTIVE_PROPERTY.ITEMS_FOUND,t.itemsFound),e.set(p.OBJECTIVE_PROPERTY.ITEM_COUNT,t.itemCount),e.set(p.OBJECTIVE_PROPERTY.PANORAMA_QUESTIONS_ANSWERED,t.panoramaQuestionsAnswered),e.set(p.OBJECTIVE_PROPERTY.PANORAMA_QUESTION_COUNT,t.panoramaQuestionCount),e.set(p.OBJECTIVE_PROPERTY.QUESTIONS_ANSWERED,t.questionsAnswered),e.set(p.OBJECTIVE_PROPERTY.QUESTION_COUNT,t.questionCount),e.set(p.OBJECTIVE_PROPERTY.PANORAMA_SCORE,t.panoramaScore),e.set(p.OBJECTIVE_PROPERTY.PANORAMA_TOTAL_SCORE,t.panoramaTotalScore),e.set(p.OBJECTIVE_PROPERTY.SCORE,t.score),e.set(p.OBJECTIVE_PROPERTY.TOTAL_SCORE,t.totalScore)}))},t.exports=p},function(t,e,i){var n=i(9),o=function(t){this._model=t,this._scoreboards={},this._model.get("objectives").forEach(function(e){this._scoreboards[e.id]=new n(t,e.id,e.initialScore||0)}.bind(this))};o.prototype.get=function(t){return this._scoreboards[t]},t.exports=o},function(t,e,i){var n=i(1),o=i(0),s=(i(8),o.extend(n,(function(t){n.call(this),this._model=t,this._model.get("playList").bind("items_change",this._onPlayListChange,this,!0),this._model.get("playList").bind("selectedIndex_change",this._onPlayListChange,this,!0),this._panoramaVisited=[],this._onPlayListChange()})));s.prototype._onPlayListChange=function(){var t=this._model.get("playList").get("items")||[],e=t.length,i=this._model.get("playList").get("selectedIndex"),n=i>=0?t[i]:null;n&&this._panoramaVisited.indexOf(n)<0&&this._panoramaVisited.push(n),this.panoramaVisitedCount=this._panoramaVisited.length,this.panoramaIndex=i,this.panoramaCount=e,this.emit(s.EVENT_CHANGE)},s.EVENT_CHANGE="change",t.exports=s},function(t,e){var i={_initialized:!1,_finished:!1,submit:function(t){this._initialize(),this._setSessionTime(t.timer.elapsed);var e=this._sanitizeIds([].concat(t.items,t.questions).map((function(t){return t.id})));t.items.forEach(function(t){var i=e[t.id],n=this._getValue("cmi.objectives._count");this._setValue("cmi.objectives."+n+".id",i),this._setValue("cmi.objectives."+n+".score.raw",100*(t.score-t.minScore)/(t.maxScore-t.minScore)),this._setValue("cmi.objectives."+n+".score.min",0),this._setValue("cmi.objectives."+n+".score.max",100),this._setValue("cmi.objectives."+n+".status",t.answer?d:_);var o=(this._getValue("cmi.interactions._children")||"").split(","),s=this._getValue("cmi.interactions._count");this._setValue("cmi.interactions."+s+".id",i),this._setValue("cmi.interactions."+s+".objectives.0.id",i),this._setValue("cmi.interactions."+s+".type",c),this._setValue("cmi.interactions."+s+".correct_responses.0.pattern",u),this._setValue("cmi.interactions."+s+".weighting",t.maxScore-t.minScore),this._setValue("cmi.interactions."+s+".student_response",t.answer?u:h),this._setValue("cmi.interactions."+s+".result",t.answer?v:y),o.indexOf("description")>=0&&this._setValue("cmi.interactions."+s+".description",i)}.bind(this)),t.questions.forEach(function(t){var i=e[t.id],n=this._getValue("cmi.objectives._count");this._setValue("cmi.objectives."+n+".id",i),this._setValue("cmi.objectives."+n+".score.raw",100*(t.score-t.minScore)/(t.maxScore-t.minScore)),this._setValue("cmi.objectives."+n+".score.min",0),this._setValue("cmi.objectives."+n+".score.max",100),this._setValue("cmi.objectives."+n+".status",t.correct?d:t.answered?_:m);var o=(this._getValue("cmi.interactions._children")||"").split(","),s=this._getValue("cmi.interactions._count");this._setValue("cmi.interactions."+s+".id",i),this._setValue("cmi.interactions."+s+".objectives.0.id",i),this._setValue("cmi.interactions."+s+".type",l);var r=[],a=[];t.options.forEach((function(e,i){var n=String.fromCharCode("a".charCodeAt(0)+i);e.score>0&&r.push(n),t.answered&&t.answer.indexOf(e)>=0&&a.push(n)})),this._setValue("cmi.interactions."+s+".correct_responses.0.pattern",r.join(",")),this._setValue("cmi.interactions."+s+".weighting",t.maxScore-t.minScore),this._setValue("cmi.interactions."+s+".student_response",a.join(",")),this._setValue("cmi.interactions."+s+".result",t.correct?v:t.answered?y:b),o.indexOf("description")>=0&&this._setValue("cmi.interactions."+s+".description",t.title)}.bind(this)),this._setValue("cmi.core.score.min",0),this._setValue("cmi.core.score.max",100);var i=0,n=0,o=0;[].concat(t.items,t.questions).forEach((function(t){i+=t.minScore,n+=t.maxScore,o+=t.score})),this._setValue("cmi.core.score.raw",100*(o-i)/(n-i)),0===t.timer.remainingTime?(this._setValue("cmi.core.exit","time-out"),this._setValue("cmi.core.lesson_status",p)):this._setValue("cmi.core.lesson_status",f),this._finish()},available:function(){return!!n},_sanitizeIds:function(t){var e={};t.forEach((function(t){var i=t.toLowerCase().split(" ").join("_").replace(/[^a-z0-9_-]/g,"").substr(0,255);(e[i]||(e[i]=[])).push(t)}));var i={};for(var n in e){var s=e[n];if(1==s.length)i[s[0]]=n;else{var r=Math.ceil(Math.log10(s.length)),a=n.slice(0,255-r);s.forEach((function(t,e){i[t]=a+o(e,r)}))}}return i},_setSessionTime:function(t){var e=Math.floor(t/3600);t-=3600*e;var i=Math.floor(t/60);t-=60*i;var n=Math.floor(t);return this._setValue("cmi.core.session_time",o(e,2)+":"+o(i,2)+":"+o(n,2))},_initialize:function(){this._initialized||this._finished||(n.LMSInitialize("")==s?this._logError():this._initialized=!0);return this._initialized},_finish:function(){this._initialized&&!this._finished&&(n.LMSFinish("")==s?this._logError():this._finished=!0);return this._finished},_setValue:function(t,e){if(!this._initialized||this._finished)return!1;"number"==typeof e?e=(.01*Math.round(100*e)).toString():"boolean"==e&&(e=e?"true":"false");var i=n.LMSSetValue(t,e);return i===s&&this._logError(),i!==s},_getValue:function(t){if(this._initialized&&!this._finished){var e=n.LMSGetValue(t);return e===r&&this._logError(),e}},_logError:function(t){var e=n.LMSGetLastError();e!=a&&console.log(t,"code: "+e+" description: "+n.LMSGetErrorString(e)+" diagnostic: "+n.LMSGetDiagnostic(e))}},n=function(){function t(t){for(var e=0;!t.API&&t.parent&&t.parent!=t;){if(++e>7)return null;t=t.parent}return t.API}var e=null;try{!(e=t(window))&&window.opener&&(e=t(window.opener))}catch(t){}return e}();function o(t,e){for(var i=t+"";i.length<e;)i="0"+i;return i}var s="false",r="",a="0",c="true-false",l="choice",u="1",h="0",d="passed",_="failed",f="completed",p="incomplete",m="not attempted",v="correct",y="wrong",b="neutral";t.exports=i},function(t,e){var i={_initialized:!1,_finished:!1,submit:function(t){this._initialize(),this._setSessionTime(t.timer.elapsed);var e=this._sanitizeIds([].concat(t.items,t.questions).map((function(t){return t.id})));t.items.forEach(function(t){var i=e[t.id],n=this._getValue("cmi.objectives._count");this._setValue("cmi.objectives."+n+".id",i),this._setValue("cmi.objectives."+n+".score.scaled",2*(t.score-t.minScore)/(t.maxScore-t.minScore)-1),this._setValue("cmi.objectives."+n+".score.raw",t.score),this._setValue("cmi.objectives."+n+".score.min",t.minScore),this._setValue("cmi.objectives."+n+".score.max",t.maxScore),this._setValue("cmi.objectives."+n+".success_status",t.answer?p:m),this._setValue("cmi.objectives."+n+".completion_status",t.answer?d:_);var o=this._getValue("cmi.interactions._count");this._setValue("cmi.interactions."+o+".id",i),this._setValue("cmi.interactions."+o+".description",t.id.substr(0,250)),this._setValue("cmi.interactions."+o+".objectives.0.id",i),this._setValue("cmi.interactions."+o+".type",c),this._setValue("cmi.interactions."+o+".correct_responses.0.pattern",u),this._setValue("cmi.interactions."+o+".weighting",t.maxScore-t.minScore),this._setValue("cmi.interactions."+o+".learner_response",t.answer?u:h),this._setValue("cmi.interactions."+o+".result",t.answer?y:b)}.bind(this)),t.questions.forEach(function(t){var i=e[t.id],n=this._getValue("cmi.objectives._count");this._setValue("cmi.objectives."+n+".id",i),this._setValue("cmi.objectives."+n+".score.scaled",2*(t.score-t.minScore)/(t.maxScore-t.minScore)-1),this._setValue("cmi.objectives."+n+".score.raw",t.score),this._setValue("cmi.objectives."+n+".score.min",t.minScore),this._setValue("cmi.objectives."+n+".score.max",t.maxScore),this._setValue("cmi.objectives."+n+".success_status",t.correct?p:t.answered?m:v),this._setValue("cmi.objectives."+n+".completion_status",t.answered?d:f);var o=this._getValue("cmi.interactions._count");this._setValue("cmi.interactions."+o+".id",i),this._setValue("cmi.interactions."+o+".description",t.title.substr(0,250)),this._setValue("cmi.interactions."+o+".objectives.0.id",i),this._setValue("cmi.interactions."+o+".type",l);var s=[],r=[];t.options.forEach((function(e,i){var n=String.fromCharCode("a".charCodeAt(0)+i);e.score>0&&s.push(n),t.answered&&t.answer.indexOf(e)>=0&&r.push(n)})),this._setValue("cmi.interactions."+o+".correct_responses.0.pattern",s.join(",")),this._setValue("cmi.interactions."+o+".weighting",t.maxScore-t.minScore),this._setValue("cmi.interactions."+o+".learner_response",r.join(",")),this._setValue("cmi.interactions."+o+".result",t.correct?y:t.answered?b:w)}.bind(this));var i=0,n=0,o=0;[].concat(t.items,t.questions).forEach((function(t){i+=t.minScore,n+=t.maxScore,o+=t.score})),this._setValue("cmi.score.scaled",2*(o-i)/(n-i)-1),this._setValue("cmi.score.min",0),this._setValue("cmi.score.max",100),this._setValue("cmi.score.raw",100*(o-i)/(n-i)),0===t.timer.remainingTime?(this._setValue("cmi.exit","time-out"),this._setValue("cmi.completion_status",_)):this._setValue("cmi.completion_status",d),this._finish()},available:function(){return!!n},_sanitizeIds:function(t){var e={};t.forEach((function(t){var i="urn:com.3dvista.scorm:"+t.toLowerCase().split(" ").join("_").replace(/[^a-z0-9_-]/g,"").substr(0,4e3);(e[i]||(e[i]=[])).push(t)}));var i={};for(var n in e){var s=e[n];if(1==s.length)i[s[0]]=n;else{var r=Math.ceil(Math.log10(s.length)),a=n.slice(0,4e3-r);s.forEach((function(t,e){i[t]=a+o(e,r)}))}}return i},_setSessionTime:function(t){var e=Math.round(t);return this._setValue("cmi.session_time","PT"+e+"S")},_initialize:function(){this._initialized||this._finished||(n.Initialize("")==s?this._logError():this._initialized=!0);return this._initialized},_finish:function(){this._initialized&&!this._finished&&(n.Terminate("")==s?this._logError():this._finished=!0);return this._finished},_setValue:function(t,e){if(!this._initialized||this._finished)return!1;"number"==typeof e?e=(.01*Math.round(100*e)).toString():"boolean"==e&&(e=e?"true":"false");var i=n.SetValue(t,e);return i===s&&this._logError(),i!==s},_getValue:function(t){if(this._initialized&&!this._finished){var e=n.GetValue(t);return e===r&&this._logError(),e}},_logError:function(t){var e=n.GetLastError();e!=a&&console.log(t,"code: "+e+" description: "+n.GetErrorString(e)+" diagnostic: "+n.GetDiagnostic(e))}},n=function(){function t(t){for(var e=0;null==t.API_1484_11&&null!=t.parent&&t.parent!=t;){if(++e>500)return null;t=t.parent}return t.API_1484_11}var e=null;try{null!=window.parent&&window.parent!=window&&(e=t(window.parent)),null==e&&null!=window.opener&&(e=t(window.opener))}catch(t){}return e}();function o(t,e){for(var i=t+"";i.length<e;)i="0"+i;return i}var s="false",r="",a="0",c="true-false",l="choice",u="true",h="false",d="completed",_="incomplete",f="not attempted",p="passed",m="failed",v="unknown",y="correct",b="incorrect",w="unanticipated";t.exports=i},function(t,e,i){var n=i(5),o=i(3),s=i(4),r=i(13),a=i(28),c=i(29),l=function(t){this._model=t,this._layout=new s(this._model.get("player"),a),this._layout.setParent(this._model.get("player")),this._panoramaPlayer=this._model.get("player").createInstance("PanoramaPlayer"),this._panoramaPlayer.set("viewerArea",this._layout.viewerArea),this._photoAlbumPlayer=this._model.get("player").createInstance("PhotoAlbumPlayer"),this._photoAlbumPlayer.set("viewerArea",this._layout.viewerArea),this._photoAlbumPlayer.set("buttonPrevious",this._layout.buttonPrevious),this._photoAlbumPlayer.set("buttonNext",this._layout.buttonNext),this._videoPlayer=this._model.get("player").createInstance("VideoPlayer"),this._videoPlayer.set("viewerArea",this._layout.viewerArea),this._videoPlayer.set("displayPlayOverlay",!0),this._videoPlayer.set("displayPlaybackBar",!0),this._videoPlayer.set("clickAction","play_pause"),this._model3DPlayer=this._model.get("player").createInstance("Model3DPlayer"),this._model3DPlayer.set("viewerArea",this._layout.viewerArea),this._optionRepeater=new r(this._model.get("player"),c),this._optionRepeater.setParent(this._layout.optionsContainer)};l.prototype.show=function(t,e){var i=this._model.getQuestion(t);return i?(e=o.mixObjects(this._model.get("question",{}),{theme:this._model.get("theme.question",{})},e||{}),this._layout.buttonOK.set("label",e.ok),this._layout.applyStyle(e.theme),o.applyStyle(this._panoramaPlayer,o.get(e,"theme.window.mediaContainer.panoramaPlayer")),this._optionRepeater.applyStyle(e.theme),i.canRepeat||!i.answered?this._askQuestion(i,e):this._showOwnAnswers(i)):n.reject("question with id: "+t+" not found.")},l.prototype._askQuestion=function(t,e){return new n(function(i,s){var r=!1,a=function(e){r||(r=!0,this._layout.buttonOK.set("visible",!1),this._unbindCloseAndOKClick(),c().then(function(){void 0!==e&&t.setAnswer(e),this._hideWindow().then((function(){i(e)}))}.bind(this)))}.bind(this);this._onCloseClick=function(){this._hideWindow().then((function(){i(void 0)}))}.bind(this);var c=function(){return e.responseDisplayTime?this._showCorrectAnswers(t,e):n.resolve()}.bind(this);this._assignQuestion(t),this._showWindow(),this._layout.closeButton.set("visible",t.canClose),this._layout.closeButton.bind("click",this._onCloseClick,this),this._optionRepeater.label.forEach(function(t,e){var i=this._optionRepeater.container[e],n=this._optionRepeater.text[e],s=!1,r=!1,a=function(){var e=r?!s:s;t.set("pressed",e),o.applyStyle(n,(e?this._model.get("theme.question.window.option.text.selected"):void 0)||this._model.get("theme.question.window.option.text"))}.bind(this);i.set("cursor","hand"),i.bind("click",(function(){s=!s,r=!1,a()})),i.bind("rollOver",(function(){r=!0,a()})),i.bind("rollOut",(function(){r=!1,a()}))}.bind(this)),t.multipleChoice?(this._onOKClick=function(){var e=t.options.filter(function(t,e){return this._optionRepeater.label[e].get("pressed")}.bind(this));e.length>0&&a(e)}.bind(this),this._layout.buttonOK.bind("click",this._onOKClick,this)):t.options.forEach(function(t,e){o.bindOnce(this._optionRepeater.container[e],"click",function(){a([t])}.bind(this))}.bind(this))}.bind(this))},l.prototype._showOwnAnswers=function(t){return new n(function(e,i){this._onCloseClick=function(){this._hideWindow().then((function(){e(void 0)}))}.bind(this),this._assignQuestion(t),this._optionRepeater.label.forEach(function(e,i){var n=t.options[i],s=t.answer.indexOf(n)>-1,r=this._optionRepeater.container[i],a=this._optionRepeater.text[i],c=function(){e.set("pressed",s),o.applyStyle(a,(s?this._model.get("theme.question.window.option.text.selected"):void 0)||this._model.get("theme.question.window.option.text"))}.bind(this);r.bind("click",(function(){c()})),c()}.bind(this)),this._layout.closeButton.set("visible",!0),this._layout.closeButton.bind("click",this._onCloseClick,this),this._showWindow()}.bind(this))},l.prototype._showWindow=function(){return o.showWindow(this._model.get("player"),this._layout.container,this._layout.veil,this._layout.window)},l.prototype._hideWindow=function(){return o.hideWindow(this._model.player,this._layout.container,this._layout.veil,this._layout.window).then(function(){return this._clearQuestion()}.bind(this))},l.prototype._assignQuestion=function(t){o.setHTMLText(this._layout.title,t.title),this._layout.buttonOK.set("visible",!(!t.multipleChoice||t.answered&&!t.canRepeat)),this._setMedia(t.media),this._optionRepeater.setSource(t.options),this._optionRepeater.label.forEach((function(t,e){t.set("label",String.fromCharCode("A".charCodeAt(0)+e))})),this._optionRepeater.text.forEach((function(e,i){e.set("content",o.textToHTML(t.options[i].text))}))},l.prototype._clearQuestion=function(){return new n(function(t,e){this._unbindCloseAndOKClick(),this._optionRepeater.setSource([]),this._setMedia(null).then((function(){setTimeout(t,30)}))}.bind(this))},l.prototype._unbindCloseAndOKClick=function(){this._onCloseClick&&this._layout.closeButton.unbind("click",this._onCloseClick,this),this._onCloseClick=null,this._onOKClick&&this._layout.buttonOK.unbind("click",this._onOKClick,this),this._onOKClick=null},l.prototype._showCorrectAnswers=function(t,e){return new n(function(i,n){var s=function(){r&&clearTimeout(r),this._unbindCloseAndOKClick(),i()}.bind(this);t.options.forEach(function(t,e){var i=this._optionRepeater.container[e],n=this._optionRepeater.label[e];i.set("cursor","default"),n.set("pressed",!1),t.score>0?o.applyStyle(n,this._model.get("theme.question.window.option.label.correct")):(t.score<0||0===t.score&&this._model.get("question.scoreZeroIsIncorrect"))&&o.applyStyle(n,this._model.get("theme.question.window.option.label.incorrect"))}.bind(this)),this._layout.closeButton.bind("click",this._onCloseClick=s,this),this._layout.closeButton.set("visible",!0);var r=setTimeout((function(){r=null,s()}),e.responseDisplayTime)}.bind(this))},l.prototype._setMedia=function(t){return new n(function(e,i){this._layout.viewerArea.set("playbackBarVisible",!1);var n=t&&"string"==typeof t,o=t&&(n?"URL":t.get("class")),s=["Video"].indexOf(o)>=0,r=["HDRPanorama","LivePanorama","Panorama","VideoPanorama","Video360"].indexOf(o)>=0,a=["PhotoAlbum"].indexOf(o)>=0,c=["Model3D"].indexOf(o)>=0;this._videoPlayer.set("video",s?t:null),this._panoramaPlayer.set("panorama",r?t:null),this._photoAlbumPlayer.set("photoAlbum",a?t:null),this._model3DPlayer.set("model",c?t:null);var l=a&&t.get("playList").get("items").length>1;this._layout.buttonNext.set("visible",l),this._layout.buttonPrevious.set("visible",l),this._layout.webFrame.set("url",n?t:""),this._layout.webFrame.set("visible",n),this._layout.viewerArea.set("visible",!n),this._layout.mediaContainer.set("visible",!!t),s?setTimeout(function(){"playing"==this._videoPlayer.get("state")&&this._videoPlayer.pause(),e()}.bind(this),30):e()}.bind(this))},t.exports=l},function(t,e,i){"use strict";t.exports=i(2),i(22),i(23),i(24),i(25),i(27)},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";var n=i(2);t.exports=n,n.prototype.done=function(t,e){var i=arguments.length?this.then.apply(this,arguments):this;i.then(null,(function(t){setTimeout((function(){throw t}),0)}))}},function(t,e,i){"use strict";var n=i(2);t.exports=n,n.prototype.finally=function(t){return this.then((function(e){return n.resolve(t()).then((function(){return e}))}),(function(e){return n.resolve(t()).then((function(){throw e}))}))}},function(t,e,i){"use strict";var n=i(2);t.exports=n;var o=u(!0),s=u(!1),r=u(null),a=u(void 0),c=u(0),l=u("");function u(t){var e=new n(n._n);return e._i=1,e._j=t,e}n.resolve=function(t){if(t instanceof n)return t;if(null===t)return r;if(void 0===t)return a;if(!0===t)return o;if(!1===t)return s;if(0===t)return c;if(""===t)return l;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new n(e.bind(t))}catch(t){return new n((function(e,i){i(t)}))}return u(t)},n.all=function(t){var e=Array.prototype.slice.call(t);return new n((function(t,i){if(0===e.length)return t([]);var o=e.length;function s(r,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof n&&a.then===n.prototype.then){for(;3===a._i;)a=a._j;return 1===a._i?s(r,a._j):(2===a._i&&i(a._j),void a.then((function(t){s(r,t)}),i))}var c=a.then;if("function"==typeof c)return void new n(c.bind(a)).then((function(t){s(r,t)}),i)}e[r]=a,0==--o&&t(e)}for(var r=0;r<e.length;r++)s(r,e[r])}))},n.reject=function(t){return new n((function(e,i){i(t)}))},n.race=function(t){return new n((function(e,i){t.forEach((function(t){n.resolve(t).then(e,i)}))}))},n.prototype.catch=function(t){return this.then(null,t)}},function(t,e,i){"use strict";var n=i(2),o=i(26);t.exports=n,n.denodeify=function(t,e){return"number"==typeof e&&e!==1/0?function(t,e){for(var i=[],o=0;o<e;o++)i.push("a"+o);var r=["return function ("+i.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(i).concat([s]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],r)(n,t)}(t,e):function(t){for(var e=Math.max(t.length-1,3),i=[],o=0;o<e;o++)i.push("a"+o);var r=["return function ("+i.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+e+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+s+";","var res;","switch (argLength) {",i.concat(["extra"]).map((function(t,e){return"case "+e+":res = fn.call("+["self"].concat(i.slice(0,e)).concat("cb").join(",")+");break;"})).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],r)(n,t)}(t)};var s="function (err, res) {if (err) { rj(err); } else { rs(res); }}";n.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),i="function"==typeof e[e.length-1]?e.pop():null,s=this;try{return t.apply(this,arguments).nodeify(i,s)}catch(t){if(null==i)return new n((function(e,i){i(t)}));o((function(){i.call(s,t)}))}}},n.prototype.nodeify=function(t,e){if("function"!=typeof t)return this;this.then((function(i){o((function(){t.call(e,null,i)}))}),(function(i){o((function(){t.call(e,i)}))}))}},function(t,e,i){"use strict";var n=i(12),o=[],s=[],r=n.makeRequestCallFromTimer((function(){if(s.length)throw s.shift()}));function a(t){var e;(e=o.length?o.pop():new c).task=t,n(e)}function c(){this.task=null}t.exports=a,c.prototype.call=function(){try{this.task.call()}catch(t){a.onerror?a.onerror(t):(s.push(t),r())}finally{this.task=null,o[o.length]=this}}},function(t,e,i){"use strict";var n=i(2);t.exports=n,n.enableSynchronous=function(){n.prototype.isPending=function(){return 0==this.getState()},n.prototype.isFulfilled=function(){return 1==this.getState()},n.prototype.isRejected=function(){return 2==this.getState()},n.prototype.getValue=function(){if(3===this._i)return this._j.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._j},n.prototype.getReason=function(){if(3===this._i)return this._j.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._j},n.prototype.getState=function(){return 3===this._i?this._j.getState():-1===this._i||-2===this._i?0:this._i}},n.disableSynchronous=function(){n.prototype.isPending=void 0,n.prototype.isFulfilled=void 0,n.prototype.isRejected=void 0,n.prototype.getValue=void 0,n.prototype.getReason=void 0,n.prototype.getState=void 0}},function(t){t.exports=JSON.parse('{"id":"container","class":"Container","creationPolicy":"inAdvance","left":0,"top":0,"right":0,"bottom":0,"layout":"absolute","visible":false,"children":[{"id":"veil","class":"UIComponent","style":"veil","left":0,"top":0,"right":0,"bottom":0,"layout":"absolute","contentOpaque":true,"hideEffect":{"class":"FadeOutEffect","duration":300,"easing":"linear"},"showEffect":{"class":"FadeInEffect","duration":300,"easing":"quad_in"},"visible":false},{"id":"window","class":"Container","style":"window","centerX":0,"centerY":0,"creationPolicy":"inAdvance","layout":"absolute","hideEffect":{"class":"FadeOutEffect","duration":300,"easing":"linear"},"showEffect":{"class":"FadeInEffect","duration":300,"easing":"quad_in"},"visible":false,"children":[{"id":"windowContent","class":"Container","style":"window.content","layout":"vertical","creationPolicy":"inAdvance","width":"100%","height":"100%","children":[{"id":"title","class":"HTML","style":"window.title","width":"100%"},{"id":"bodyContainer","class":"Container","style":"window.bodyContainer","creationPolicy":"inAdvance","layout":"horizontal","width":"100%","children":[{"id":"mediaContainer","class":"Container","style":"window.mediaContainer","creationPolicy":"inAdvance","layout":"absolute","width":"100%","children":[{"id":"webFrame","class":"WebFrame","style":"window.mediaContainer.webFrame","width":"100%","height":"100%"},{"id":"viewerArea","class":"ViewerArea","style":"window.mediaContainer.viewerArea","width":"100%","height":"100%"},{"id":"buttonNext","class":"IconButton","style":"window.mediaContainer.buttonNext","centerY":0,"right":0},{"id":"buttonPrevious","class":"IconButton","style":"window.mediaContainer.buttonPrevious","centerY":0,"left":0}]},{"id":"optionsContainer","class":"Container","style":"window.optionsContainer","creationPolicy":"inAdvance","layout":"vertical","width":"100%"}]},{"id":"buttonsContainer","class":"Container","style":"window.buttonsContainer","creationPolicy":"inAdvance","layout":"horizontal","width":"100%","children":[{"id":"buttonOK","class":"Button","style":"window.buttonsContainer.button"}]}]},{"id":"closeButton","class":"CloseButton","style":"window.closeButton","right":0,"top":0}]}]}')},function(t){t.exports=JSON.parse('{"id":"container","class":"Container","style":"window.option","contentOpaque":true,"creationPolicy":"inAdvance","childrenInteractionEnabled":false,"layout":"horizontal","width":"100%","children":[{"id":"label","class":"Button","style":"window.option.label","mode":"toggle"},{"id":"text","class":"HTML","style":"window.option.text","width":"100%"}]}')},function(t,e,i){var n=i(5),o=i(10),s=i(11),r=i(4),a=i(13),c=i(3),l=i(31),u=i(32),h=function(t,e,i){this._model=t,this._objectiveScoreboards=e,this._mainScoreboard=this._objectiveScoreboards.get(this._model.get("mainObjective")),this._stats=i,this._layout=new r(this._model.get("player"),u),this._layout.setParent(this._model.get("player")),this._layout.buttonRepeat.bind("click",(function(){window.location.reload()}),this,!0),c.bindOnce(this._layout.buttonSubmit,"click",(function(){s.submit(this._model),this._layout.buttonSubmit.set("opacity",.3),this._layout.buttonSubmit.set("cursor","default")}),this,!0),this._layout.buttonCSV.bind("click",(function(){o.download(this._model)}),this,!0),this._objectiveRepeater=new a(this._model.get("player"),l),this._objectiveRepeater.setParent(this._layout.statsContainer)};h.prototype.show=function(t){var e=!1;this._model.timer.isRunning()&&(this._model.timer.pause(),e=!0),t=c.mixObjects(this._model.get("score",{}),{theme:this._model.get("theme.score",{})},t||{}),this._layout.applyStyle(t.theme),this._objectiveRepeater.applyStyle(t.theme),this._layout.closeButton.set("visible",t.canClose),this._layout.title.set("text",t.title),this._layout.description.set("visible",!!t.description),t.description&&this._layout.description.set("content",c.textToHTML(t.description)),this._layout.completionContainer.set("visible",t.completion.visible),this._layout.completionTitle.set("text",t.completion.label),this._layout.panoramaTotal.set("text","/"+this._stats.panoramaCount),this._layout.completedCount.set("text",this._stats.panoramaVisitedCount),this._layout.itemsContainer.set("visible",t.items.visible&&this._mainScoreboard.itemCount>0),this._layout.itemsTitle.set("text",t.items.label),this._layout.itemsFound.set("text",this._mainScoreboard.itemsFound),this._layout.itemCount.set("text","/"+this._mainScoreboard.itemCount),this._layout.questionsContainer.set("visible",t.questions.visible&&this._mainScoreboard.questionCount>0),this._layout.questionsTitle.set("text",t.questions.label),this._layout.correctLabel.set("text",t.questions.correctLabel+":"),this._layout.correctValue.set("text",this._mainScoreboard.correctAnswerCount),this._layout.incorrectLabel.set("text",t.questions.incorrectLabel+":"),this._layout.incorrectValue.set("text",this._mainScoreboard.incorrectAnswerCount);var i=this._model.get("objectives").filter((function(t){return!1!==t.visibleInScore}));this._objectiveRepeater.setSource(i),i.forEach(function(t,e){this._objectiveRepeater.objectiveLabel[e].set("text",t.label||"Score"),this._objectiveRepeater.objectiveValue[e].set("text",this._objectiveScoreboards.get(t.id).score)}.bind(this));var o=this._model.getCalification(this._mainScoreboard.score);return this._layout.calification.set("visible",!!o),o&&this._layout.calification.set("content",c.textToHTML(o)),this._layout.timeContainer.set("visible",t.elapsedTime.visible),this._layout.timeLabel.set("text",t.elapsedTime.label+":"),t.elapsedTime.visible&&this._layout.timeValue.set("text",c.secondsToStr(this._model.timer.elapsed)),this._layout.buttonSubmit.set("label",t.submitToLMS.label),this._layout.buttonSubmit.set("visible",t.submitToLMS.visible&&s.available),this._layout.buttonCSV.set("label",t.downloadCSV.label),this._layout.buttonCSV.set("visible",t.downloadCSV.visible),this._layout.buttonRepeat.set("label",t.repeat.label),this._layout.buttonRepeat.set("visible",this._mainScoreboard.score<=this._model.get("maxScoreToRepeat",this._mainScoreboard.score)&&t.repeat.visible),c.showWindow(this._model.get("player"),this._layout.container,this._layout.veil,this._layout.window),new n(function(t,i){c.bindOnce(this._layout.closeButton,"click",function(){e&&this._model.timer.continue(),c.hideWindow(this._model.get("player"),this._layout.container,this._layout.veil,this._layout.window).then(t)}.bind(this))}.bind(this))},t.exports=h},function(t){t.exports=JSON.parse('{"id":"objectiveContainer","class":"Container","overflow":"hidden","style":"window.stats","children":[{"id":"objectiveLabel","class":"Label","style":"window.stats.title","text":"Total Score"},{"id":"objectiveValue","class":"Label","style":"window.stats.mainValue"}]}')},function(t){t.exports=JSON.parse('{"id":"container","class":"Container","creationPolicy":"inAdvance","left":0,"top":0,"right":0,"bottom":0,"layout":"absolute","visible":false,"children":[{"id":"veil","class":"UIComponent","style":"veil","left":0,"top":0,"right":0,"bottom":0,"layout":"absolute","contentOpaque":true,"hideEffect":{"class":"FadeOutEffect","duration":300,"easing":"linear"},"showEffect":{"class":"FadeInEffect","duration":300,"easing":"quad_in"},"visible":false},{"id":"window","class":"Container","style":"window","centerX":0,"centerY":0,"creationPolicy":"inAdvance","layout":"absolute","hideEffect":{"class":"FadeOutEffect","duration":300,"easing":"linear"},"showEffect":{"class":"FadeInEffect","duration":300,"easing":"quad_in"},"visible":false,"children":[{"id":"windowContent","class":"Container","style":"window.content","layout":"vertical","creationPolicy":"inAdvance","children":[{"id":"title","class":"Label","style":"window.title","width":"100%"},{"id":"description","class":"HTML","style":"window.description","width":"100%"},{"id":"statsContainer","class":"Container","style":"window.statsContainer","creationPolicy":"inAdvance","layout":"horizontal","width":"100%","children":[{"id":"completionContainer","class":"Container","style":"window.stats","creationPolicy":"inAdvance","children":[{"id":"completionTitle","class":"Label","style":"window.stats.title"},{"class":"Container","creationPolicy":"inAdvance","layout":"horizontal","verticalAlign":"middle","children":[{"id":"completedCount","class":"Label","style":"window.stats.mainValue"},{"id":"panoramaTotal","class":"Label","style":"window.stats.secondaryValue"}]}]},{"id":"itemsContainer","class":"Container","style":"window.stats","creationPolicy":"inAdvance","children":[{"id":"itemsTitle","class":"Label","style":"window.stats.title"},{"class":"Container","creationPolicy":"inAdvance","layout":"horizontal","verticalAlign":"middle","children":[{"id":"itemsFound","class":"Label","style":"window.stats.mainValue"},{"id":"itemCount","class":"Label","style":"window.stats.secondaryValue"}]}]},{"id":"questionsContainer","class":"Container","style":"window.stats","creationPolicy":"inAdvance","children":[{"id":"questionsTitle","class":"Label","style":"window.stats.title"},{"class":"Container","layout":"horizontal","creationPolicy":"inAdvance","verticalAlign":"middle","children":[{"id":"correctLabel","class":"Label","style":"window.stats.label"},{"id":"correctValue","class":"Label","style":"window.stats.secondaryValue"}]},{"class":"Container","layout":"horizontal","creationPolicy":"inAdvance","verticalAlign":"middle","children":[{"id":"incorrectLabel","class":"Label","style":"window.stats.label"},{"id":"incorrectValue","class":"Label","style":"window.stats.secondaryValue"}]}]}]},{"id":"calification","class":"HTML","style":"window.calification","width":"100%"},{"id":"timeContainer","class":"Container","style":"window.timeContainer","layout":"horizontal","children":[{"id":"timeLabel","class":"Label","style":"window.stats.label"},{"id":"timeValue","class":"Label","style":"window.stats.secondaryValue"}]},{"id":"buttonsContainer","class":"Container","style":"window.buttonsContainer","creationPolicy":"inAdvance","layout":"horizontal","width":"100%","children":[{"id":"buttonSubmit","class":"Button","style":"window.buttonsContainer.button"},{"id":"buttonCSV","class":"Button","style":"window.buttonsContainer.button"},{"id":"buttonRepeat","class":"Button","style":"window.buttonsContainer.button"}]}]},{"id":"closeButton","class":"CloseButton","style":"window.closeButton","right":0,"top":0}]}]}')},function(t,e,i){var n=i(1),o=i(0),s=i(4),r=i(3),a=i(34),c=o.extend(n,(function(t){n.call(this),this._model=t,this._layout=new s(this._model.get("player"),a),this._layout.setParent(this._model.get("player")),this._layout.buttonRepeat.bind("click",(function(){window.location.reload()}),this,!0),this._layout.buttonScore.bind("click",(function(){this.emit(c.EVENT_SHOW_SCORE_CLICK,this._scoreConfig)}),this,!0)}));c.prototype.show=function(t,e){t=r.mixObjects(this._model.get("timeout",{}),{theme:this._model.get("theme.timeout",{})},t||{}),this._scoreConfig=e,this._layout.applyStyle(t.theme),this._layout.title.set("text",t.title),this._layout.buttonRepeat.set("visible",t.repeat.visible),this._layout.buttonRepeat.set("label",t.repeat.label),this._layout.buttonScore.set("visible",t.score.visible),this._layout.buttonScore.set("label",t.score.label),r.showWindow(this._model.get("player"),this._layout.container,this._layout.veil,this._layout.window)},c.EVENT_SHOW_SCORE_CLICK="showScoreClick",t.exports=c},function(t){t.exports=JSON.parse('{"id":"container","class":"Container","creationPolicy":"inAdvance","left":0,"top":0,"right":0,"bottom":0,"layout":"absolute","visible":false,"children":[{"id":"veil","class":"UIComponent","style":"veil","left":0,"top":0,"right":0,"bottom":0,"layout":"absolute","contentOpaque":true,"hideEffect":{"class":"FadeOutEffect","duration":300,"easing":"linear"},"showEffect":{"class":"FadeInEffect","duration":300,"easing":"quad_in"},"visible":false},{"id":"window","class":"Container","style":"window","centerX":0,"centerY":0,"creationPolicy":"inAdvance","layout":"vertical","hideEffect":{"class":"FadeOutEffect","duration":300,"easing":"linear"},"showEffect":{"class":"FadeInEffect","duration":300,"easing":"quad_in"},"visible":false,"children":[{"id":"icon","class":"Image","style":"window.icon"},{"id":"title","class":"Label","style":"window.title","width":"100%","text":"- TIMEOUT -"},{"id":"buttonsContainer","class":"Container","style":"window.buttonsContainer","creationPolicy":"inAdvance","layout":"horizontal","width":"100%","children":[{"id":"buttonScore","class":"Button","style":"window.button"},{"id":"buttonRepeat","class":"Button","style":"window.button"}]}]}]}')}]);